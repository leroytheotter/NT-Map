<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>New Testament Map: Technical Specifications</title>

    <!-- Bootstrap Core CSS -->
    <link href="data/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="data/css/logo-nav.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- The style sheet here has some of the map styling for zooming buttons, etc. -->
    <link rel="stylesheet" href="data/css/ol.css" type="text/css">

    <!-- This extra bit of style defines the size of the "map" div tag area that shows up later -->
    <style>
        .map {
            height: 600px;
            width: 100%;
        }
    </style>

    <!-- Here we link to the local copy of OpenLayers -->
    <script src="data/js/ol.js" type="text/javascript"></script>

    <!-- Here we link to the map functions script -->
    <script src="data/js/map-functions.js" type="text/javascript"></script>

</head>

<body>

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://www.civilscott.com">
                <img src="scrollLogo.jpg" alt="Picture of New Testament">
            </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li>
                    <a href="http://www.civilscott.com">Reset</a>
                </li>
                <li>
                    <a href="help.html">Help</a>
                </li>
                <li>
                    <a href="techspecs.html">Technical Specifications</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<!-- Main Body -->
<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <div>
                <h3 id="contents">Contents</h3>
                <a href="#videotour">Video Tour of the Site and the Coding</a><br>
                <a href="#overview">Introduction</a><br>
                <a href="#sources">Sources and Modules</a><br>
                <a href="#dataformats">Data Formats</a><br>
                <a href="#codelayout">Code Layout</a><br>
                <a href="#UMLsequence">UML Sequence Diagram</a><br>

                <a href="#licence">Licence</a><br>
            </div>
            <div>
                <h3 id="videotour">Video Tour of the Site and the Coding</h3>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/yLxY4s-juss" frameborder="0" allowfullscreen></iframe><br>
            </div>
            <div>
                <h3 id="overview">Introduction</h3>
                The New Testament Web Map is a web map designed to display information on selected events and locations
                from the New Testament. The purpose of the map is to inform the reader and to encourage scriptural and
                historical study.<br>

                <h3 id="sources">Sources and Modules</h3>
                Several third party javascript modules are used in the operation of this site. The first is
                <a href="http://getbootstrap.com/">Bootstrap</a> (3.3.2) which handles the formatting and provides the
                handling for the map popups. Next is <a href="http://jquery.com/">jQuery</a> (1.11.1) which provides
                additional functionality for the map and popups. Last is <a href="http://openlayers.org/">OpenLayers 3</a>
                which generates the map and handles all the geospatial processing and display of the locations from their
                KML files.<br>
                <br>
                The information found in the description for each location and event was taken from a variety of sources.
                These sources include scriptural descriptions, chronologies, modern research, traditional locations,
                and appropriate images.<br>

                <h3 id="dataformats">Data Formats</h3>
                The data for each location (line or point) is stored in separate KML files. These KML files contain the
                point coordinates for the location (or the path coordinate set for a line), the name of the location,
                and the description of the site (formatted as an HTML table inside the KML file). The images references
                and links displayed in the popup bubbles are also located inside the HTML descriptions. The image files
                themselves for both the description images and the map icons are stored on the server and referenced in
                the KML file.
            </div>
            <div>
                <h3 id="codelayout">Code Layout</h3>
                <h4>HTML</h4>
                The primary HTML for the site is relatively simple. It primarily consists of a container that holds the
                map and the popup handler. Below the map two option boxes allow the user to select a location to zoom to
                and provide detail on, and to allow the user to select between a street map and a satilite hybrid map.
                The rest of the HTML is the site layout and administrative functions: calling javascript functions that
                are required for the map and site to work, loading CSS, and setting up the header and footer with the
                correct information and links. This additional code is mostly the same on each page of the map as it is
                just a container for the body of the page.<br>

                <h4>CSS</h4>
                The CSS used by the site is mostly the default CSS provided by openlayers and bootstrap. The only unique
                CSS file is the page default CSS that is based off a bootstrap theme and customized with data unique to
                this site (primarily just the location of the header and footer and an offset for anchors).<br>

                <h4>JavaScript</h4>
                There are several standard javascript modules that are used throughout the code and the site. These
                modules are bootstrap, jquery, and openlayers. Additionally, much of the functionality of the site is
                controlled by a custom javascript file that controls the map and the location data.<br>
                <br>
                This javascript file contains all the map functions and controls used on the site, and thus is - rather
                uncreatively - named map-functions. Within the map-functions script, each action is grouped as a
                function. These functions are called either by the user interaction with the map or form controls,
                automatically on page load, or by other functions which were themselves called by one of the first two
                options.<br>
                <br>
                The first function that is called is the <b>CreateMap</b> function. This function calls another function
                to create the layers that will be used in the map, creates the map object, loads all the layers into the
                map, adds the scale line control, deloads the satilite view, and sets up the initial popup system. <br>

                The second function that is run is the <b>CreateLayers</b> function, that is called by the
                <b>CreateMap</b> function. This function creates a new map layer for both possible base maps, and for
                each location - calling the data from the location's respective KML file. This function is relatively
                simple as it just runs the same code for each layer, reading them to be added to the map document.<br>

                The next function is the <b>LocationSelector</b> function. This function is called when the user selects
                a location in the option box below the map on the main page. When the user selects an option the
                function will run the code in a specific case, where the case chosen depends on what the user selected.
                If the user chose to clear all items, then the code will run the None case. The code will run another
                function called <b>TurnAllLayersOff</b>, then it wil remove all popups and rest the view to default. If
                the user selects the view all case, the code will run the All case. First the code will run the
                <b>TurnAllLayersOff</b> function, then it will destroy any popups that are open. Next it will enable
                each layer - begging with the third layer, as the first two layers are the basemaps. Once all the layers
                are enabled, the script will reset the zoom and extents to the default settings. Finally, if the user
                selects a location, the script will find the corresponding location case. Next, the script will run the
                <b>TurnAllLayersOff</b> function. Then it wll enable the selected layer, extract the coordinates from
                the location, zoom to the selected location, and finally call the popup handler.<br>

                The <b>TurnAllLayersOff</b> function is a simple descriptively named function. It's sole purpose is to
                disable all non-basemap layers. It does this by getting the list of all layers loaded into the map and
                sequentially setting their visibility to false.<br>

                The popup handler consists of three separate functions that each create popups using different input
                data. The first handler is the <b>PopUp_Bubble</b> function. This function converts the data from a
                mouse click into coordinate data for another handler, and thus requires a click event as it's input.
                First the function will initialize the popup code. Next loads the feature at the click event into a
                variable. Then it runs a if statement where if there is a feature at the location it will extract the
                coordinates from the click location, and pass the coordinates and the feature on to the
                <b>PopUp_FromCoord</b> function. If there is no function located at theclick location, then any existing
                popups will be destroyed. The second handler is the <b>PopUp_FromFeature</b> function. This is the
                function that is called when a point location is selected from the drop menu. This function first
                initializes the popup functionality. Then it extracts the coordinates from the feature and places the
                popup location at the extracted coordinates. Finally the function creates the popup and adds the data
                from the description table in the KML file to the inner container of the popup and displays the popup.
                The third handler is the <b>PopUp_FromCoord</b> function. It is quite similar to the
                <b>PopUp_FromFeature</b> function except that instead of extracting the coordinates from the feature, it
                uses the coordinates that were passed to it by the function that called it.<br>

                The final function is the <b>BaseSelector</b> function. The purpose of this function is to change the
                basemap when the user selects the other option in the basemap selector option box. The function does
                this by selecting the corresponding case and running it. For either option the function simply sets the
                visibility of the current basemap layer to false, and the other basemap layer to true.<br>

                <h3 id="UMLsequence">UML Sequence Diagram</h3>






            </div>

            <div>
                <h3 id="licence">Licence</h3>
                <h4>HTML and Javascript Code</h4>
                The code of this website is licenced by Michael Scott and Ryan Moore under the MIT Licence as provided
                below.<br>
                <div>
                    <br>
                    <!-- Begin MIT Licence -->
                    The MIT License (MIT)<br>
                    <br>
                    Copyright (c) 2015 Michael Scott and Ryan Moore<br>
                    <br>
                    Permission is hereby granted, free of charge, to any person obtaining a copy<br>
                    of this software and associated documentation files (the "Software"), to deal<br>
                    in the Software without restriction, including without limitation the rights<br>
                    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell<br>
                    copies of the Software, and to permit persons to whom the Software is<br>
                    furnished to do so, subject to the following conditions:<br>
                    <br>
                    The above copyright notice and this permission notice shall be included in all<br>
                    copies or substantial portions of the Software.<br>
                    <br>
                    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br>
                    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,<br>
                    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE<br>
                    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER<br>
                    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,<br>
                    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE<br>
                    SOFTWARE.<br>
                    <br>
                    <!-- End MIT Licence -->
                </div>

                <h4>Contents</h4>
                The contents of this website are licenced by Michael Scott and Ryan Moore under the
                <a href="http://creativecommons.org/licenses/by/4.0/">Commons Attribution 4.0 International License</a>
                .<br>
                <br>

            </div>
        </div>
    </div>
</div>
<!-- End Body -->


<footer class="footer">

    <div class="container">

        <p class="text-muted">

            <!-- Licence -->
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
                <img alt="Creative Commons License" style="border-width:0"
                     src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>
            <br />This <span xmlns:dct="http://purl.org/dc/terms/"
                             href="http://purl.org/dc/dcmitype/InteractiveResource" rel="dct:type">work</span> by <span
                xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Michael Scott and Ryan Moore</span>
            is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
            Creative Commons Attribution 4.0 International License</a>.

        </p>

    </div>

</footer>

</body>

</html>
